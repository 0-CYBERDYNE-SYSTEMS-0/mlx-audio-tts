<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MLX-Audio TTS Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
</head>
<body>
    <!-- Animated Background -->
    <div class="bg-grid"></div>
    <div class="bg-noise"></div>
    <div class="floating-orbs">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <!-- Glitch Effect Overlay -->
    <div class="glitch-overlay"></div>

    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="logo-icon">
                        <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
                            <circle cx="24" cy="24" r="20" stroke="currentColor" stroke-width="2"/>
                            <path d="M18 18L18 30L30 24Z" fill="currentColor"/>
                            <circle cx="34" cy="14" r="2" fill="currentColor"/>
                        </svg>
                    </div>
                    <div class="logo-text">
                        <h1 class="main-title glitch-text" data-text="MLX-Audio">MLX-Audio</h1>
                        <div class="subtitle-container">
                            <span class="subtitle typewriter">Text-to-Speech Generation Engine</span>
                            <span class="cursor"></span>
                        </div>
                    </div>
                </div>
                <div class="status-indicator">
                    <div class="status-dot online"></div>
                    <span>Online</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <div class="content-wrapper">
                <!-- Input Section -->
                <section class="input-section">
                    <div class="section-header">
                        <h2 class="section-title">
                            <span class="title-icon">üéôÔ∏è</span>
                            Voice Configuration
                        </h2>
                    </div>

                    <form id="tts-form" class="tts-form">
                        <!-- Text Input -->
                        <div class="form-group">
                            <label for="text-input" class="form-label">
                                <span class="label-text">Script</span>
                                <span class="label-accent">Input</span>
                            </label>
                            <div class="input-wrapper">
                                <textarea
                                    id="text-input"
                                    name="text"
                                    placeholder="Enter your script here... Type or paste the text you want to convert to speech."
                                    rows="6"
                                    maxlength="5000"
                                    class="text-input"
                                    required
                                ></textarea>
                                <div class="input-decoration">
                                    <div class="corner-tl"></div>
                                    <div class="corner-br"></div>
                                </div>
                            </div>
                            <div class="char-counter">
                                <span class="char-count" id="char-count">0</span>
                                <span class="char-separator">/</span>
                                <span class="char-max">5000</span>
                                <span class="char-units">characters</span>
                            </div>
                        </div>

                        <!-- Voice Mode Selection -->
                        <div class="form-group">
                            <label class="form-label">
                                <span class="label-text">Voice</span>
                                <span class="label-accent">Mode</span>
                            </label>
                            <div class="voice-mode-selector">
                                <div class="mode-card active" data-mode="preset">
                                    <div class="mode-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 14.5v-9l6 4.5-6 4.5z"/>
                                        </svg>
                                    </div>
                                    <div class="mode-content">
                                        <h3>Preset Voice</h3>
                                        <p>Choose from built-in voices</p>
                                    </div>
                                    <div class="mode-indicator"></div>
                                </div>
                                <div class="mode-card" data-mode="clone">
                                    <div class="mode-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                                        </svg>
                                    </div>
                                    <div class="mode-content">
                                        <h3>Voice Clone</h3>
                                        <p>Upload audio to clone a voice</p>
                                    </div>
                                    <div class="mode-indicator"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Preset Voice Selection -->
                        <div class="form-group" id="preset-voice-group">
                            <label for="voice-select" class="form-label">
                                <span class="label-text">Voice</span>
                                <span class="label-accent">Selection</span>
                            </label>
                            <div class="select-wrapper">
                                <select id="voice-select" name="voice" class="voice-select">
                                    <option value="">Loading available voices...</option>
                                </select>
                                <div class="select-arrow">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <!-- Voice Cloning Section -->
                        <div class="form-group hidden" id="clone-voice-group">
                            <label for="ref-audio-upload" class="form-label">
                                <span class="label-text">Reference</span>
                                <span class="label-accent">Audio</span>
                            </label>
                            <div class="file-upload-wrapper">
                                <div class="file-upload-area" id="file-upload-area">
                                    <div class="upload-icon">
                                        <svg width="48" height="48" viewBox="0 0 48 48" fill="currentColor">
                                            <path d="M24 4v20M14 14l10 10 10-10" stroke="currentColor" stroke-width="2" fill="none"/>
                                            <rect x="6" y="26" width="36" height="16" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                                        </svg>
                                    </div>
                                    <div class="upload-text">
                                        <p class="upload-title">Drop audio file here or click to browse</p>
                                        <p class="upload-subtitle">Supports WAV, MP3, FLAC, M4A, OGG</p>
                                    </div>
                                    <input type="file" id="ref-audio-upload" name="ref-audio" accept=".wav,.mp3,.flac,.m4a,.ogg" class="file-input">
                                </div>
                                <div class="file-info hidden" id="file-info">
                                    <div class="file-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>
                                            <circle cx="12" cy="12" r="3"/>
                                        </svg>
                                    </div>
                                    <div class="file-details">
                                        <p class="file-name" id="file-name">audio.wav</p>
                                        <p class="file-size" id="file-size">2.3 MB</p>
                                    </div>
                                    <button type="button" class="file-remove" id="file-remove">
                                        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                            <path d="M8 6.586L2.707 1.293a1 1 0 00-1.414 1.414L6.586 8l-5.293 5.293a1 1 0 101.414 1.414L8 9.414l5.293 5.293a1 1 0 001.414-1.414L9.414 8l5.293-5.293a1 1 0 00-1.414-1.414L8 6.586z"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="form-field">
                                <label for="ref-text-input" class="field-label">Reference Text (Optional)</label>
                                <input
                                    type="text"
                                    id="ref-text-input"
                                    name="ref-text"
                                    placeholder="Text spoken in the reference audio..."
                                    class="text-input"
                                >
                                <p class="field-help">Leave blank to auto-transcribe the audio</p>
                            </div>
                        </div>

                        <!-- Parameters Section -->
                        <div class="form-group">
                            <div class="parameters-grid">
                                <div class="parameter-card">
                                    <label class="parameter-label">
                                        <span>Speed</span>
                                        <span class="parameter-value" id="speed-value">1.0x</span>
                                    </label>
                                    <div class="slider-container">
                                        <input
                                            type="range"
                                            id="speed-slider"
                                            name="speed"
                                            min="0.5"
                                            max="2.0"
                                            step="0.1"
                                            value="1.0"
                                            class="parameter-slider"
                                        >
                                        <div class="slider-track">
                                            <div class="slider-fill"></div>
                                        </div>
                                    </div>
                                    <div class="parameter-labels">
                                        <span>0.5x</span>
                                        <span>2.0x</span>
                                    </div>
                                </div>

                                <div class="parameter-card">
                                    <label class="parameter-label">
                                        <span>Temperature</span>
                                        <span class="parameter-value" id="temperature-value">0.7</span>
                                    </label>
                                    <div class="slider-container">
                                        <input
                                            type="range"
                                            id="temperature-slider"
                                            name="temperature"
                                            min="0.1"
                                            max="1.0"
                                            step="0.1"
                                            value="0.7"
                                            class="parameter-slider"
                                        >
                                        <div class="slider-track">
                                            <div class="slider-fill"></div>
                                        </div>
                                    </div>
                                    <div class="parameter-labels">
                                        <span>Consistent</span>
                                        <span>Creative</span>
                                    </div>
                                </div>

                                <div class="parameter-card">
                                    <label class="parameter-label">
                                        <span>Format</span>
                                    </label>
                                    <div class="format-selector">
                                        <button type="button" class="format-btn active" data-format="wav">WAV</button>
                                        <button type="button" class="format-btn" data-format="mp3">MP3</button>
                                        <button type="button" class="format-btn" data-format="flac">FLAC</button>
                                    </div>
                                    <input type="hidden" id="format-select" name="audio-format" value="wav">
                                </div>
                            </div>
                        </div>

                        <!-- Generate Button -->
                        <button type="submit" id="generate-btn" class="generate-btn">
                            <div class="btn-content">
                                <span class="btn-text">Generate Audio</span>
                                <span class="btn-accent">‚ñ∂</span>
                            </div>
                            <div class="btn-glow"></div>
                            <div class="loading-spinner hidden" id="loading-spinner">
                                <div class="spinner"></div>
                            </div>
                        </button>

                        <!-- Error Message -->
                        <div class="error-message hidden" id="error-message">
                            <div class="error-icon">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"/>
                                </svg>
                            </div>
                            <span id="error-text">Something went wrong</span>
                        </div>
                    </form>
                </section>

                <!-- Results Section -->
                <section class="results-section hidden" id="results-section">
                    <div class="results-header">
                        <h2 class="results-title">
                            <span class="title-icon">üéµ</span>
                            Generated Audio
                        </h2>
                        <div class="success-badge">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                <path d="M8 16A8 8 0 108 0a8 8 0 000 16zm-1.707-8.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4a1 1 0 00-1.414-1.414L8 8.586 6.293 6.879z"/>
                            </svg>
                            <span>Ready</span>
                        </div>
                    </div>

                    <div class="audio-player-section">
                        <div class="audio-header">
                            <h3>
                                <span class="audio-icon">üéµ</span>
                                Audio Player
                            </h3>
                            <div class="audio-controls">
                                <button id="play-pause-btn" class="control-btn" title="Play/Pause">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path id="play-icon" d="M8 5v14l11-7z"/>
                                        <path id="pause-icon" d="M6 19h4V5H6v14zm8-14v14h4V5h-4z" style="display: none;"/>
                                    </svg>
                                </button>
                                <button id="download-direct-btn" class="control-btn" title="Download Audio">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 11.586V3a1 1 0 112 0v8.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"/>
                                    </svg>
                                </button>
                                <button id="volume-btn" class="control-btn" title="Volume">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                                    </svg>
                                    <div id="volume-slider" class="volume-slider hidden">
                                        <input type="range" min="0" max="100" value="70" id="volume-input">
                                    </div>
                                </button>
                                <button id="speed-control-btn" class="control-btn" title="Playback Speed">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M10 8.64L15.27 12 10 15.36V8.64M8 5v14l11-7L8 5z"/>
                                    </svg>
                                    <div id="speed-menu" class="speed-menu hidden">
                                        <button data-speed="0.5">0.5x</button>
                                        <button data-speed="0.75">0.75x</button>
                                        <button data-speed="1" class="active">1x</button>
                                        <button data-speed="1.25">1.25x</button>
                                        <button data-speed="1.5">1.5x</button>
                                        <button data-speed="2">2x</button>
                                    </div>
                                </button>
                            </div>
                        </div>

                        <div class="progress-section">
                            <div class="time-display">
                                <span id="current-time" class="time-current">0:00</span>
                                <span class="time-separator">/</span>
                                <span id="total-time" class="time-total">0:00</span>
                            </div>
                            <div class="progress-container">
                                <div class="progress-bar" id="progress-bar">
                                    <div class="progress-fill" id="progress-fill"></div>
                                    <div class="progress-handle" id="progress-handle"></div>
                                </div>
                            </div>
                        </div>

                        <div class="waveform-container">
                            <div class="waveform" id="waveform">
                                <div class="wave-bar" style="height: 20%;"></div>
                                <div class="wave-bar" style="height: 40%;"></div>
                                <div class="wave-bar" style="height: 60%;"></div>
                                <div class="wave-bar" style="height: 80%;"></div>
                                <div class="wave-bar" style="height: 100%;"></div>
                                <div class="wave-bar" style="height: 85%;"></div>
                                <div class="wave-bar" style="height: 70%;"></div>
                                <div class="wave-bar" style="height: 55%;"></div>
                                <div class="wave-bar" style="height: 75%;"></div>
                                <div class="wave-bar" style="height: 65%;"></div>
                                <div class="wave-bar" style="height: 45%;"></div>
                                <div class="wave-bar" style="height: 25%;"></div>
                                <div class="wave-bar" style="height: 35%;"></div>
                                <div class="wave-bar" style="height: 50%;"></div>
                                <div class="wave-bar" style="height: 30%;"></div>
                                <div class="wave-bar" style="height: 15%;"></div>
                                <div class="wave-bar" style="height: 40%;"></div>
                                <div class="wave-bar" style="height: 55%;"></div>
                                <div class="wave-bar" style="height: 70%;"></div>
                                <div class="wave-bar" style="height: 85%;"></div>
                                <div class="wave-bar" style="height: 95%;"></div>
                                <div class="wave-bar" style="height: 80%;"></div>
                                <div class="wave-bar" style="height: 60%;"></div>
                                <div class="wave-bar" style="height: 40%;"></div>
                                <div class="wave-bar" style="height: 25%;"></div>
                                <div class="wave-bar" style="height: 10%;"></div>
                                <div class="wave-bar" style="height: 30%;"></div>
                                <div class="wave-bar" style="height: 50%;"></div>
                                <div class="wave-bar" style="height: 70%;"></div>
                                <div class="wave-bar" style="height: 85%;"></div>
                            </div>
                            <div class="waveform-progress" id="waveform-progress"></div>
                        </div>

                        <!-- Hidden native audio element for actual playback -->
                        <audio id="audio-player" preload="metadata" style="display: none;">
                            Your browser does not support the audio element.
                        </audio>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 110-12 6 6 0 010 12zm1-9H9v4h2V7zm0 6H9v2h2v-2z"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <span class="stat-label">Duration</span>
                                <span class="stat-value" id="audio-duration">-</span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 110-12 6 6 0 010 12zm1-9H9v2h2V7zm0 4H9v2h2v-2z"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <span class="stat-label">Processing</span>
                                <span class="stat-value" id="processing-time">-</span>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 2a8 8 0 100 16 8 8 0 000-16zm0 14a6 6 0 110-12 6 6 0 010 12zm1-9H9v6h2V7zm0 8H9v2h2v-2z"/>
                                </svg>
                            </div>
                            <div class="stat-content">
                                <span class="stat-label">Format</span>
                                <span class="stat-value" id="audio-format">-</span>
                            </div>
                        </div>
                    </div>

                    <div class="download-section">
                        <div class="download-header">
                            <h3>
                                <span class="download-icon">‚¨áÔ∏è</span>
                                Download Options
                            </h3>
                            <div class="format-badges">
                                <span class="format-badge" id="download-format">WAV</span>
                                <span class="size-badge" id="download-size">~2.5 MB</span>
                            </div>
                        </div>

                        <div class="download-actions">
                            <a id="download-btn" class="download-btn primary" download>
                                <div class="btn-content">
                                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                        <path d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 11.586V3a1 1 0 112 0v8.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z"/>
                                    </svg>
                                    <span>Download Audio</span>
                                </div>
                                <div class="btn-glow"></div>
                            </a>

                            <div class="additional-actions">
                                <button id="copy-link-btn" class="action-btn" title="Copy Download Link">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M5 1a2 2 0 00-2 2v8a2 2 0 002 2h6a2 2 0 002-2V3a2 2 0 00-2-2H5zM4 3a1 1 0 011-1h6a1 1 0 011 1v8a1 1 0 01-1 1H5a1 1 0 01-1-1V3z"/>
                                        <path d="M11 4a2 2 0 00-2 2v1H8V6a1 1 0 011-1h1a1 1 0 011 1v7a1 1 0 01-1 1H8a1 1 0 01-1-1V8H6v7a2 2 0 002 2h6a2 2 0 002-2V6a2 2 0 00-2-2h-2z"/>
                                    </svg>
                                </button>
                                <button id="share-btn" class="action-btn" title="Share Audio">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M13.5 1a1.5 1.5 0 100 3 1.5 1.5 0 000-3zM11 2.5a2.5 2.5 0 11.603 1.628l-6.718 3.12a2.499 2.499 0 010 1.504l6.718 3.12a2.5 2.5 0 11-.488-.876l-6.718-3.12a2.5 2.5 0 110-3.256l6.718-3.12A2.5 2.5 0 0111 2.5zm-8.5 4a1.5 1.5 0 100 3 1.5 1.5 0 000-3z"/>
                                    </svg>
                                </button>
                                <button id="new-tab-btn" class="action-btn" title="Open in New Tab">
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                                        <path d="M8 0a8 8 0 100 16A8 8 0 008 0zM6.5 4.5a.5.5 0 00-1 0v7a.5.5 0 001 0v-7zm4 0a.5.5 0 00-1 0v7a.5.5 0 001 0v-7z"/>
                                        <path d="M14 4.5V14a2 2 0 01-2 2H4a2 2 0 01-2-2V2a2 2 0 012-2h5.5L14 4.5zm-13 0A1.5 1.5 0 012.5 3h5L14 6.5V14a1 1 0 01-1.5 1.5h-9A1.5 1.5 0 012 14.5V4.5z"/>
                                        <path d="M9 1v5h5l-5-5z" opacity="0.3"/>
                                    </svg>
                                </button>
                            </div>
                        </div>

                        <div class="download-info">
                            <p class="download-hint">
                                üí° <strong>Tip:</strong> Right-click the download button and select "Save Link As..." to choose a custom filename.
                            </p>
                            <div class="file-details">
                                <span class="detail-item">
                                    <strong>Format:</strong> <span id="detail-format">WAV</span>
                                </span>
                                <span class="detail-item">
                                    <strong>Duration:</strong> <span id="detail-duration">0:00</span>
                                </span>
                                <span class="detail-item">
                                    <strong>Quality:</strong> <span id="detail-quality">High</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <div class="footer-left">
                    <p>Powered by MLX-Audio</p>
                </div>
                <div class="footer-right">
                    <p>Built with FastAPI & Vanilla JavaScript</p>
                </div>
            </div>
        </footer>
    </div>

    <script src="/js/ui.js"></script>
    <script src="/js/api.js"></script>
    <script src="/js/audio-player.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>
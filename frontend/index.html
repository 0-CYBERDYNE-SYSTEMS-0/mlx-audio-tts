<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KREO TTS - Minimalist Text-to-Speech</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="icon" type="image/x-icon" href="/assets/favicon.ico">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="brand">
                    <div class="brand-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M12 2L2 7v10c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-10-5z"/>
                        </svg>
                    </div>
                    <h1 class="brand-title">KREO</h1>
                </div>
                <div class="header-status">
                    <div class="status-indicator"></div>
                    <span class="status-text">Ready</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <div class="container">
                <!-- Input Section -->
                <section class="input-section">
                    <div class="section-header">
                        <h2 class="section-title">Create Speech</h2>
                        <p class="section-subtitle">Transform text into natural-sounding audio</p>
                    </div>

                    <form id="tts-form" class="form">
                        <!-- Text Input -->
                        <div class="form-group">
                            <label for="text-input" class="form-label">Text to Speech</label>
                            <div class="textarea-wrapper">
                                <textarea
                                    id="text-input"
                                    name="text"
                                    placeholder="Enter your text here..."
                                    rows="4"
                                    maxlength="5000"
                                    class="text-input"
                                    required
                                ></textarea>
                                <div class="char-counter">
                                    <span id="char-count">0</span> / 5000
                                </div>
                            </div>
                        </div>

                        <!-- Voice Selection -->
                        <div class="form-group">
                            <label class="form-label">Voice Type</label>
                            <div class="voice-selector">
                                <div class="voice-option active" data-mode="preset">
                                    <div class="voice-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a3 3 0 01-3-3V5a3 3 0 116 0v6a3 3 0 01-3 3z"/>
                                        </svg>
                                    </div>
                                    <div class="voice-content">
                                        <h3>Preset Voices</h3>
                                        <p>Choose from our collection</p>
                                    </div>
                                </div>
                                <div class="voice-option" data-mode="clone">
                                    <div class="voice-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                        </svg>
                                    </div>
                                    <div class="voice-content">
                                        <h3>Voice Cloning</h3>
                                        <p>Upload or record a sample</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Preset Voice Selection -->
                        <div class="form-group" id="preset-group">
                            <label for="voice-select" class="form-label">Select Voice</label>
                            <div class="select-wrapper">
                                <select id="voice-select" name="voice" class="select">
                                    <option value="">Loading voices...</option>
                                </select>
                                <div class="select-arrow">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polyline points="6,9 12,15 18,9"></polyline>
                                    </svg>
                                </div>
                            </div>
                        </div>

                        <!-- Voice Cloning Interface -->
                        <div class="form-group hidden" id="clone-group">
                            <label class="form-label">Voice Sample</label>

                            <div class="source-tabs">
                                <button type="button" class="source-tab active" data-source="record">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"/>
                                        <path d="M19 10v2a7 7 0 01-14 0v-2"/>
                                        <line x1="12" y1="19" x2="12" y2="23"/>
                                        <line x1="8" y1="23" x2="16" y2="23"/>
                                    </svg>
                                    Record
                                </button>
                                <button type="button" class="source-tab" data-source="upload">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                        <polyline points="17,8 12,3 7,8"/>
                                        <line x1="12" y1="3" x2="12" y2="15"/>
                                    </svg>
                                    Upload
                                </button>
                            </div>

                            <!-- Recording Interface -->
                            <div class="recording-interface" id="recording-interface">
                                <button type="button" id="record-btn" class="record-btn">
                                    <div class="record-icon">
                                        <svg viewBox="0 0 24 24" fill="currentColor">
                                            <circle cx="12" cy="12" r="8"/>
                                        </svg>
                                    </div>
                                    <span>Start Recording</span>
                                </button>

                                <div class="recording-status hidden" id="recording-status">
                                    <div class="recording-indicator"></div>
                                    <span class="recording-text">Recording</span>
                                    <span class="recording-time" id="recording-time">00:00</span>
                                </div>

                                <div class="audio-visualizer hidden" id="audio-visualizer">
                                    <canvas id="visualizer-canvas"></canvas>
                                </div>

                                <div class="recording-tips">
                                    <p>• Speak clearly for 10-30 seconds</p>
                                    <p>• Find a quiet environment</p>
                                </div>
                            </div>

                            <!-- Upload Interface -->
                            <div class="upload-interface hidden" id="upload-interface">
                                <div class="upload-area" id="upload-area">
                                    <div class="upload-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                            <polyline points="17,8 12,3 7,8"/>
                                            <line x1="12" y1="3" x2="12" y2="15"/>
                                        </svg>
                                    </div>
                                    <p class="upload-text">Drop audio file here or click to browse</p>
                                    <p class="upload-subtitle">WAV, MP3, FLAC, M4A, OGG (max 50MB)</p>
                                    <input type="file" id="audio-upload" accept=".wav,.mp3,.flac,.m4a,.ogg" class="file-input">
                                </div>

                                <div class="file-info hidden" id="file-info">
                                    <div class="file-icon">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                            <path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/>
                                            <polyline points="14,2 14,8 20,8"/>
                                            <line x1="16" y1="13" x2="8" y2="13"/>
                                            <line x1="16" y1="17" x2="8" y2="17"/>
                                            <polyline points="10,9 9,9 8,9"/>
                                        </svg>
                                    </div>
                                    <div class="file-details">
                                        <span class="file-name" id="file-name"></span>
                                        <span class="file-size" id="file-size"></span>
                                    </div>
                                    <button type="button" class="file-remove" id="file-remove">
                                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <line x1="18" y1="6" x2="6" y2="18"/>
                                            <line x1="6" y1="6" x2="18" y2="18"/>
                                        </svg>
                                    </button>
                                </div>
                            </div>

                            <div class="reference-text">
                                <label for="ref-text" class="form-label">Reference Text (Optional)</label>
                                <input
                                    type="text"
                                    id="ref-text"
                                    name="ref-text"
                                    placeholder="Text spoken in the reference audio"
                                    class="input"
                                >
                                <p class="input-help">Leave blank to auto-transcribe</p>
                            </div>
                        </div>

                        <!-- Parameters -->
                        <div class="form-group">
                            <label class="form-label">Settings</label>
                            <div class="parameters">
                                <div class="parameter">
                                    <div class="parameter-header">
                                        <span class="parameter-label">Speed</span>
                                        <span class="parameter-value" id="speed-value">1.0x</span>
                                    </div>
                                    <div class="slider-wrapper">
                                        <input
                                            type="range"
                                            id="speed-slider"
                                            name="speed"
                                            min="0.5"
                                            max="2.0"
                                            step="0.1"
                                            value="1.0"
                                            class="slider"
                                        >
                                        <div class="slider-track">
                                            <div class="slider-fill"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="parameter">
                                    <div class="parameter-header">
                                        <span class="parameter-label">Temperature</span>
                                        <span class="parameter-value" id="temperature-value">0.7</span>
                                    </div>
                                    <div class="slider-wrapper">
                                        <input
                                            type="range"
                                            id="temperature-slider"
                                            name="temperature"
                                            min="0.1"
                                            max="1.0"
                                            step="0.1"
                                            value="0.7"
                                            class="slider"
                                        >
                                        <div class="slider-track">
                                            <div class="slider-fill"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="parameter">
                                    <div class="parameter-header">
                                        <span class="parameter-label">Format</span>
                                    </div>
                                    <div class="format-selector">
                                        <button type="button" class="format-btn active" data-format="wav">WAV</button>
                                        <button type="button" class="format-btn" data-format="mp3">MP3</button>
                                        <button type="button" class="format-btn" data-format="flac">FLAC</button>
                                    </div>
                                    <input type="hidden" id="format-select" name="audio-format" value="wav">
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <div class="form-actions">
                            <button type="submit" id="generate-btn" class="btn-primary">
                                <span class="btn-text">Generate Speech</span>
                                <div class="btn-icon">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="5,3 19,12 5,21 5,3"/>
                                    </svg>
                                </div>
                                <div class="btn-loading">
                                    <div class="loading-spinner"></div>
                                </div>
                            </button>
                        </div>

                        <!-- Error Message -->
                        <div class="error-message hidden" id="error-message">
                            <div class="error-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <line x1="15" y1="9" x2="9" y2="15"/>
                                    <line x1="9" y1="9" x2="15" y2="15"/>
                                </svg>
                            </div>
                            <span class="error-text" id="error-text"></span>
                        </div>
                    </form>
                </section>

                <!-- Results Section -->
                <section class="results-section hidden" id="results-section">
                    <div class="section-header">
                        <h2 class="section-title">Generated Audio</h2>
                        <div class="success-badge">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
                                <polyline points="22,4 12,14.01 9,11.01"/>
                            </svg>
                            <span>Ready</span>
                        </div>
                    </div>

                    <div class="audio-player">
                        <div class="player-header">
                            <div class="player-controls">
                                <button id="play-btn" class="control-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="5,3 19,12 5,21 5,3"/>
                                    </svg>
                                </button>
                                <button id="download-btn" class="control-btn">
                                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4"/>
                                        <polyline points="7,10 12,15 17,10"/>
                                        <line x1="12" y1="15" x2="12" y2="3"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="player-info">
                                <h3 class="audio-title">Generated Speech</h3>
                                <p class="audio-meta">
                                    <span id="audio-duration">0:00</span> •
                                    <span id="audio-format">WAV</span> •
                                    <span id="audio-size">~0 MB</span>
                                </p>
                            </div>
                        </div>

                        <div class="progress-section">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                                <div class="progress-handle" id="progress-handle"></div>
                            </div>
                            <div class="time-display">
                                <span id="current-time">0:00</span>
                                <span>/</span>
                                <span id="total-time">0:00</span>
                            </div>
                        </div>

                        <div class="waveform">
                            <div class="wave-bars" id="wave-bars">
                                <!-- Wave bars will be generated dynamically -->
                            </div>
                        </div>
                    </div>

                    <div class="audio-stats">
                        <div class="stat">
                            <span class="stat-label">Processing Time</span>
                            <span class="stat-value" id="processing-time">-</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Quality</span>
                            <span class="stat-value">High</span>
                        </div>
                        <div class="stat">
                            <span class="stat-label">Sample Rate</span>
                            <span class="stat-value">22050 Hz</span>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="container">
                <p class="footer-text">Powered by MLX-Audio • Built with precision</p>
            </div>
        </footer>
    </div>

    <!-- Hidden audio element -->
    <audio id="audio-player" preload="metadata"></audio>

    <!-- Scripts -->
    <script src="/js/ui.js"></script>
    <script src="/js/api.js"></script>
    <script src="/js/audio-player.js"></script>
    <script src="/js/audio-recorder.js"></script>
    <script src="/js/voice-recorder-ui.js"></script>
    <script src="/js/app.js"></script>
</body>
</html>